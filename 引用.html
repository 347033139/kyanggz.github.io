<!DOCTYPE html>
<!-- saved from url=(0089)http://localhost:8080/Perl%e6%95%99%e7%a8%8b/%E5%BC%95%E7%94%A8.php?pg=%E5%BC%95%E7%94%A8 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<title>引用</title>		
	<link rel="stylesheet" href="./files/style.css" type="text/css" media="all">	
	<link rel="stylesheet" href="./files/font-awesome.min.css" media="all">	
</head>
	<body style="">
		<div class="container navigation">
			<div class="row">
				<div class="col nav">
				</div>
			</div>
		</div>
		<div class="container main">
			<div class="row">
				<div class="col left-column">
	<div class="tab">
		Perl 引用	</div>
	<div class="sidebar-box gallery-list">
		<div class="design" id="leftcolumn">
							<a target="_top" title="教程" href="./教程.html?pg=教程">
								教程
							</a>
							<a target="_top" title="简介" href="./简介.html?pg=简介">
								简介
							</a>
							<a target="_top" title="环境安装" href="h./环境安装.html?pg=环境安装">
								环境安装
							</a>
							<a target="_top" title="基础语法" href="./基础语法.html?pg=基础语法">
								基础语法
							</a>
							<a target="_top" title="数据类型" href="./数据类型.html?pg=数据类型">
								数据类型
							</a>
							<a target="_top" title="变量" href="./变量.html?pg=变量">
								变量
							</a>
							<a target="_top" title="标量" href="./标量.html?pg=标量">
								标量
							</a>
							<a target="_top" title="数组" href="./数组.html?pg=数组">
								数组
							</a>
							<a target="_top" title="哈希" href="./哈希.html?pg=哈希">
								哈希
							</a>
							<a target="_top" title="条件语句" href="./条件语句.html?pg=条件语句">
								条件语句	
							</a>
							<a target="_top" title="Perl 循环" href="./循环.html?pg=循环">
								循环
							</a>
							<a target="_top" title="Perl 循环控制" href="./循环控制.html?pg=循环控制">
								循环控制
							</a>
							<a target="_top" title="运算符" href="./运算符.html?pg=运算符">
								运算符
							</a>
							<a target="_top" title="子程序(函数)" href="./子程序.html?pg=子程序">
								子程序(函数)	
							</a>
							<a target="_top" title="引用" href="./引用.html?pg=引用" style="background-color: rgb(150, 185, 125); font-weight: bold; color: rgb(255, 255, 255);">
								引用
							</a>
							<a target="_top" title="格式化输出" href="./格式化输出.html?pg=格式化输出">
								格式化输出
							</a>
							<a target="_top" title="文件操作" href="./文件操作.html?pg=文件操作">
								文件操作
							</a>
							<a target="_top" title="目录操作" href="./目录操作.html?pg=目录操作">
								目录操作	
							</a>
							<a target="_top" title="特殊变量" href="./特殊变量.html?pg=特殊变量">
								特殊变量	
							</a>
							<a target="_top" title="正则表达式" href="./正则表达式.html?pg=正则表达式">
								正则表达式
							</a>
		</div>
	</div>
</div>
				<div class="col middle-column">
					<div class="article" style="background-color: rgb(255, 255, 255);">
						<div class="previous-next-links">
		<div class="previous-design-link">
		<a href="./子程序.html?pg=子程序" rel="prev" title="子程序">
			Perl 子程序		</a>
	</div>
	<div class="next-design-link">
		<a href="./文件操作.html?pg=文件操作" rel="next" title="文件操作">
			Perl 文件操作		</a>
	</div>
</div>
						<div class="article-body">
							<div class="article-intro" id="content">
			<h1>Perl 引用</h1>

<p>引用就是指针，Perl 引用是一个标量类型可以指向变量、数组、哈希表（也叫关联数组）甚至子程序，可以应用在程序的任何地方。</p>
<p>
</p><hr>
<h2>创建引用</h2>
<p>
定义变量的时候，在变量名前面加个\，就得到了这个变量的一个引用，比如:</p>


<pre class="prettyprint prettyprinted" style=""><span class="pln">$scalarref </span><span class="pun">=</span><span class="pln"> \$foo</span><span class="pun">;</span><span class="pln">     </span><span class="com"># 标量变量引用</span><span class="pln">
$arrayref  </span><span class="pun">=</span><span class="pln"> \@ARGV</span><span class="pun">;</span><span class="pln">    </span><span class="com"># 列表的引用</span><span class="pln">
$hashref   </span><span class="pun">=</span><span class="pln"> \%ENV</span><span class="pun">;</span><span class="pln">     </span><span class="com"># 哈希的引用</span><span class="pln">
$coderef   </span><span class="pun">=</span><span class="pln"> \&amp;handler</span><span class="pun">;</span><span class="pln"> </span><span class="com"># 子过程引用</span><span class="pln">
$globref   </span><span class="pun">=</span><span class="pln"> \*foo</span><span class="pun">;</span><span class="pln">     </span><span class="com"># GLOB句柄引用</span></pre>
<p>在数组中我们可以用匿名数组引用，使用 [] 定义：</p>
<pre class="prettyprint prettyprinted" style=""><span class="pln">$aref</span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="str">"foo"</span><span class="pun">,</span><span class="kwd">undef</span><span class="pun">,</span><span class="lit">13</span><span class="pln"> </span><span class="pun">];</span></pre>
<p>匿名数组的元素仍然可以是匿名数组，所以我们可以用这种方法构造数组的数组，可以构造任意维度的数组。</p>
<pre class="prettyprint prettyprinted" style=""><span class="kwd">my</span><span class="pln"> $aref </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">],</span><span class="pln">
</span><span class="pun">]</span></pre>
<p>在哈希中我们可以用匿名哈希引用，使用 {} 定义：</p>
<pre class="prettyprint prettyprinted" style=""><span class="pln">$href</span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> APR </span><span class="pun">=&gt;</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> AUG </span><span class="pun">=&gt;</span><span class="lit">8</span><span class="pln"> </span><span class="pun">};</span></pre>
<p>我们也可以创建一个没有子程序名的匿名子程序引用:</p>
<pre class="prettyprint prettyprinted" style=""><span class="pln">$coderef </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">sub</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">print</span><span class="pln"> </span><span class="str">"Runoob!\n"</span><span class="pln"> </span><span class="pun">};</span></pre>
<hr>
<h2>
取消引用</h2>
<p>取消引用可以根据不同的类型使用  $, @ 或 % 来取消，实例如下：</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-var">$var</span><span class="hl-code"> = </span><span class="hl-number">10</span><span class="hl-code">;
 
</span><span class="hl-comment"># $r 引用 $var 标量</span><span class="hl-code">
</span><span class="hl-var">$r</span><span class="hl-code"> = \</span><span class="hl-var">$var</span><span class="hl-code">;
 
</span><span class="hl-comment"># 输出本地存储的 $r 的变量值</span><span class="hl-code">
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-var">$var</span><span class="hl-string"> 为 : </span><span class="hl-quotes">"</span><span class="hl-code">, $</span><span class="hl-var">$r</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
 
</span><span class="hl-var">@var</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment"># $r 引用  @var 数组</span><span class="hl-code">
</span><span class="hl-var">$r</span><span class="hl-code"> = \</span><span class="hl-var">@var</span><span class="hl-code">;
</span><span class="hl-comment"># 输出本地存储的 $r 的变量值</span><span class="hl-code">
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">@var 为: </span><span class="hl-quotes">"</span><span class="hl-code">,  @</span><span class="hl-var">$r</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
 
</span><span class="hl-var">%var</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">key1</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key2</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">20</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-comment"># $r 引用  %var 数组</span><span class="hl-code">
</span><span class="hl-var">$r</span><span class="hl-code"> = \</span><span class="hl-var">%var</span><span class="hl-code">;
</span><span class="hl-comment"># 输出本地存储的 $r 的变量值</span><span class="hl-code">
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">\%var 为 : </span><span class="hl-quotes">"</span><span class="hl-code">, %</span><span class="hl-var">$r</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
</div>

<p>执行以上实例执行结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-58-38.jpg"></p>
<p>如果你不能确定变量类型，你可以使用 <b>ref</b> 来判断，返回值列表如下，如果没有以下的值返回 false：</p>
<pre class="prettyprint prettyprinted" style=""><span class="pln">SCALAR
ARRAY
HASH
CODE
GLOB
REF</span></pre>
<p>实例如下：</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-var">$var</span><span class="hl-code"> = </span><span class="hl-number">10</span><span class="hl-code">;
</span><span class="hl-var">$r</span><span class="hl-code"> = \</span><span class="hl-var">$var</span><span class="hl-code">;
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">r 的引用类型 : </span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-reserved">ref</span><span class="hl-brackets">(</span><span class="hl-var">$r</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
 
</span><span class="hl-var">@var</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$r</span><span class="hl-code"> = \</span><span class="hl-var">@var</span><span class="hl-code">;
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">r 的引用类型 : </span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-reserved">ref</span><span class="hl-brackets">(</span><span class="hl-var">$r</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
 
</span><span class="hl-var">%var</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">key1</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">key2</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">20</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$r</span><span class="hl-code"> = \</span><span class="hl-var">%var</span><span class="hl-code">;
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">r 的引用类型 : </span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-reserved">ref</span><span class="hl-brackets">(</span><span class="hl-var">$r</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
</div><p>执行以上实例执行结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-23_10-20-36.jpg"></p>
<hr>
<h2>
循环引用</h2>
<p>循环引用在两个引用相互包含时出现。你需要小心使用，不然会导致内存泄露，如下实例：</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-reserved">my</span><span class="hl-code"> </span><span class="hl-var">$foo</span><span class="hl-code"> = </span><span class="hl-number">100</span><span class="hl-code">;
</span><span class="hl-var">$foo</span><span class="hl-code"> = \</span><span class="hl-var">$foo</span><span class="hl-code">;
 
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Value of foo is : </span><span class="hl-quotes">"</span><span class="hl-code">, $</span><span class="hl-var">$foo</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
</div><p>执行以上实例执行结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-23_10-22-30.jpg"></p>
<hr>
<h2>引用函数</h2>
<p>函数引用格式: \&amp; </p>
<p>调用引用函数格式: &amp; + 创建的引用名。</p>
<p>实例如下：</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 函数定义</span><span class="hl-code">
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">PrintHash</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-reserved">my</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-var">%hash</span><span class="hl-brackets">)</span><span class="hl-code"> = </span><span class="hl-var">@_</span><span class="hl-code">;
   
   </span><span class="hl-reserved">foreach</span><span class="hl-code"> </span><span class="hl-var">$item</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-var">%hash</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
      </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">元素 : </span><span class="hl-var">$item</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
   </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-var">%hash</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">runoob</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">age</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">3</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment"># 创建函数的引用</span><span class="hl-code">
</span><span class="hl-var">$cref</span><span class="hl-code"> = \&amp;</span><span class="hl-identifier">PrintHash</span><span class="hl-code">;
 
</span><span class="hl-comment"># 使用引用调用函数</span><span class="hl-code">
&amp;</span><span class="hl-var">$cref</span><span class="hl-brackets">(</span><span class="hl-var">%hash</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
</div><p>执行以上实例执行结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-23_10-24-05.jpg"></p>
							</div>
						</div>
						<div class="previous-next-links">
		<div class="previous-design-link">
		<a href="./子程序.html?pg=子程序" rel="prev" title="子程序">
			Perl 子程序		</a>
	</div>
	<div class="next-design-link">
		<a href="./文件操作.html?pg=文件操作" rel="next" title="文件操作">
			Perl 文件操作		</a>
	</div>
</div>
					</div>
				</div>
			</div>
		</div>
	
</body></html>
