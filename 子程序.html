<!DOCTYPE html>
<!-- saved from url=(0107)http://localhost:8080/Perl%e6%95%99%e7%a8%8b/%E5%AD%90%E7%A8%8B%E5%BA%8F.php?pg=%E5%AD%90%E7%A8%8B%E5%BA%8F -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<title>子程序</title>		
	<link rel="stylesheet" href="./files/style.css" type="text/css" media="all">	
	<link rel="stylesheet" href="./files/font-awesome.min.css" media="all">	
</head>
	<body style="">
		<div class="container navigation">
			<div class="row">
				<div class="col nav">
				</div>
			</div>
		</div>
		<div class="container main">
			<div class="row">
				<div class="col left-column">
	<div class="tab">
		Perl 子程序	</div>
	<div class="sidebar-box gallery-list">
		<div class="design" id="leftcolumn">
							<a target="_top" title="教程" href="./教程.html?pg=教程">
								教程
							</a>
							<a target="_top" title="简介" href="./简介.html?pg=简介">
								简介
							</a>
							<a target="_top" title="环境安装" href="h./环境安装.html?pg=环境安装">
								环境安装
							</a>
							<a target="_top" title="基础语法" href="./基础语法.html?pg=基础语法">
								基础语法
							</a>
							<a target="_top" title="数据类型" href="./数据类型.html?pg=数据类型">
								数据类型
							</a>
							<a target="_top" title="变量" href="./变量.html?pg=变量">
								变量
							</a>
							<a target="_top" title="标量" href="./标量.html?pg=标量">
								标量
							</a>
							<a target="_top" title="数组" href="./数组.html?pg=数组">
								数组
							</a>
							<a target="_top" title="哈希" href="./哈希.html?pg=哈希">
								哈希
							</a>
							<a target="_top" title="条件语句" href="./条件语句.html?pg=条件语句">
								条件语句	
							</a>
							<a target="_top" title="Perl 循环" href="./循环.html?pg=循环">
								循环
							</a>
							<a target="_top" title="运算符" href="./运算符.html?pg=运算符">
								运算符
							</a>
							<a target="_top" title="子程序(函数)" href="./子程序.html?pg=子程序" style="background-color: rgb(150, 185, 125); font-weight: bold; color: rgb(255, 255, 255);">
								子程序(函数)	
							</a>
							<a target="_top" title="引用" href="./引用.html?pg=引用">
								引用
							</a>
							<a target="_top" title="格式化输出" href="./格式化输出.html?pg=格式化输出">
								格式化输出
							</a>
							<a target="_top" title="文件操作" href="./文件操作.html?pg=文件操作">
								文件操作
							</a>
							<a target="_top" title="目录操作" href="./目录操作.html?pg=目录操作">
								目录操作	
							</a>
							<a target="_top" title="特殊变量" href="./特殊变量.html?pg=特殊变量">
								特殊变量	
							</a>
							<a target="_top" title="正则表达式" href="./正则表达式.html?pg=正则表达式">
								正则表达式
							</a>
		</div>
	</div>
</div>
				<div class="col middle-column">
					<div class="article" style="background-color: rgb(255, 255, 255);">
						<div class="previous-next-links">
		<div class="previous-design-link">
		<a href="./运算符.html?pg=运算符" rel="prev" title="运算符">
			Perl 运算符		</a>
	</div>
	<div class="next-design-link">
		<a href="./引用.html?pg=引用" rel="next" title="引用">
			Perl 引用		</a>
	</div>
</div>
						<div class="article-body">
							<div class="article-intro" id="content">
			
			<h1>Perl 子程序(函数)</h1>

<p>Perl 子程序也就是用户定义的函数。</p>
<p>Perl 子程序即执行一个特殊任务的一段分离的代码，它可以使减少重复代码且使程序易读。</p>
<p>Perl 子程序可以出现在程序的任何地方，语法格式如下：</p>
<pre class="prettyprint prettyprinted" style=""><span class="kwd">sub</span><span class="pln"> subroutine</span><span class="pun">{</span><span class="pln">
   statements</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></pre>
<p>调用子程序语法格式：</p>
<pre class="prettyprint prettyprinted" style=""><span class="pln">subroutine</span><span class="pun">(</span><span class="pln"> </span><span class="pun">参数列表</span><span class="pln"> </span><span class="pun">);</span></pre>
<p>在 Perl 5.0 以下版本调用子程序方法如下：</p>
<pre class="prettyprint prettyprinted" style=""><span class="pun">&amp;</span><span class="pln">subroutine</span><span class="pun">(</span><span class="pln"> </span><span class="pun">参数列表</span><span class="pln"> </span><span class="pun">);</span></pre>
<p>在新版本上，虽然也支持该调用方法，但不推荐使用。</p>
<p>接下来我们来看一个简单是实例：</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 函数定义</span><span class="hl-code">
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">Hello</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">Hello, World!</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment"># 函数调用</span><span class="hl-code">
</span><span class="hl-identifier">Hello</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
</div>
<p>执行以上程序，输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-26-46.jpg"></p>
<hr>
<h2>向子程序传递参数</h2>
<p>
Perl 子程序可以和其他编程一样接受多个参数，子程序参数使用特殊数组 @_ 标明。</p>
<p>因此子程序第一个参数为 $_[0], 第二个参数为 $_[1], 以此类推。</p>
<p>不论参数是标量型还是数组型的，用户把参数传给子程序时，perl默认按引用的方式调用它们。</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 定义求平均值函数</span><span class="hl-code">
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">Average</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-comment"># 获取所有传入的参数</span><span class="hl-code">
   </span><span class="hl-var">$n</span><span class="hl-code"> = </span><span class="hl-reserved">scalar</span><span class="hl-brackets">(</span><span class="hl-var">@_</span><span class="hl-brackets">)</span><span class="hl-code">;
   </span><span class="hl-var">$sum</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;
 
   </span><span class="hl-reserved">foreach</span><span class="hl-code"> </span><span class="hl-var">$item</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-var">@_</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
      </span><span class="hl-var">$sum</span><span class="hl-code"> += </span><span class="hl-var">$item</span><span class="hl-code">;
   </span><span class="hl-brackets">}</span><span class="hl-code">
   </span><span class="hl-var">$average</span><span class="hl-code"> = </span><span class="hl-var">$sum</span><span class="hl-quotes"> /</span><span class="hl-string"> $n;
   print '传入的参数为 : ',"@_\n";           # 打印整个数组
   print "第一个参数值为 : $_[0]\n";         # 打印第一个参数
   print "传入参数的平均值为 : $average\n";  # 打印平均值
}
 
# 调用函数
Average(10, 20, 30);</span></div>
</div>
</div><p>执行以上程序，输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-31-08.jpg"></p>
<p>用户可以通过改变 @_ 数组中的值来改变相应实际参数的值。</p>
<h3>向子程序传递列表</h3>
<p>由于 @_ 变量是一个数组，所以它可以向子程序中传递列表。</p>
<p>但如果我们需要传入标量和数组参数时，需要把列表放在最后一个参数上，如下所示：</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 定义函数</span><span class="hl-code">
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">PrintList</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-reserved">my</span><span class="hl-code"> </span><span class="hl-var">@list</span><span class="hl-code"> = </span><span class="hl-var">@_</span><span class="hl-code">;
   </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">列表为 : @list</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-var">$a</span><span class="hl-code"> = </span><span class="hl-number">10</span><span class="hl-code">;
</span><span class="hl-var">@b</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-code">, </span><span class="hl-number">3</span><span class="hl-code">, </span><span class="hl-number">4</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment"># 列表参数</span><span class="hl-code">
</span><span class="hl-identifier">PrintList</span><span class="hl-brackets">(</span><span class="hl-var">$a</span><span class="hl-code">, </span><span class="hl-var">@b</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
</div>
<p>以上程序将标量和数组合并了，输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-32-34.jpg"></p>
<p>
我们可以向子程序传入多个数组和哈希，但是在传入多个数组和哈希时，会导致丢失独立的标识。所以我们需要使用引用（下一章节会介绍）来传递。</p>
<h2>向子程序传递哈希</h2>
<p>当向子程序传递哈希表时，它将复制到 @_ 中，哈希表将被展开为键/值组合的列表。</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 方法定义</span><span class="hl-code">
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">PrintHash</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-reserved">my</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-var">%hash</span><span class="hl-brackets">)</span><span class="hl-code"> = </span><span class="hl-var">@_</span><span class="hl-code">;
 
   </span><span class="hl-reserved">foreach</span><span class="hl-code"> </span><span class="hl-reserved">my</span><span class="hl-code"> </span><span class="hl-var">$key</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-reserved">keys</span><span class="hl-code"> </span><span class="hl-var">%hash</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
      </span><span class="hl-reserved">my</span><span class="hl-code"> </span><span class="hl-var">$value</span><span class="hl-code"> = </span><span class="hl-var">$hash</span><span class="hl-brackets">{</span><span class="hl-var">$key</span><span class="hl-brackets">}</span><span class="hl-code">;
      </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-var">$key</span><span class="hl-string"> : </span><span class="hl-var">$value</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
   </span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-var">%hash</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">name</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">runoob</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">age</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">3</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-comment"># 传递哈希</span><span class="hl-code">
</span><span class="hl-identifier">PrintHash</span><span class="hl-brackets">(</span><span class="hl-var">%hash</span><span class="hl-brackets">)</span><span class="hl-code">;</span></div>
</div>
</div>
<p>以上程序执行输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-35-05.jpg"></p>
<hr>
<h2>子程序返回值</h2>
<p>子程序可以向其他编程语言一样使用 return 语句来返回函数值。</p>
<p>如果没有使用 return 语句，则子程序的最后一行语句将作为返回值。</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 方法定义</span><span class="hl-code">
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">add_a_b</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-comment"># 不使用 return</span><span class="hl-code">
   </span><span class="hl-var">$_</span><span class="hl-brackets">[</span><span class="hl-number">0</span><span class="hl-brackets">]</span><span class="hl-code">+</span><span class="hl-var">$_</span><span class="hl-brackets">[</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code">;  
 
   </span><span class="hl-comment"># 使用 return</span><span class="hl-code">
   </span><span class="hl-comment"># return $_[0]+$_[1];  </span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-identifier">add_a_b</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-number">2</span><span class="hl-brackets">)</span></div>
</div>
</div>
<p>以上程序执行输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-43-38.jpg"></p>
<p>
子程序中我们可以返回标量，数组和哈希，但是在返回多个数组和哈希时，会导致丢失独立的标识。所以我们需要使用引用（下一章节会介绍）来返回多个数组和函数。</p>
<hr>
<h2>子程序的私有变量</h2>
<p>默认情况下，Perl 中所有的变量都是全局变量，这就是说变量在程序的任何地方都可以调用。</p>
<p>如果我们需要设置私有变量，可以使用 <b>my</b> 操作符来设置。</p>
<p><b>my</b> 操作符用于创建词法作用域变量，通过 <b>my</b> 创建的变量，存活于声明开始的地方，直到闭合作用域的结尾。</p>
<p>闭合作用域指的可以是一对花括号中的区域，可以是一个文件，也可以是一个 if, while, for, foreach, eval字符串。</p>
<p>以下实例演示了如何声明一个或多个私有变量：</p>
<pre class="prettyprint prettyprinted" style=""><span class="kwd">sub</span><span class="pln"> somefunc </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">my</span><span class="pln"> $variable</span><span class="pun">;</span><span class="pln"> </span><span class="com"># $variable 在方法 somefunc() 外不可见</span><span class="pln">
   </span><span class="kwd">my</span><span class="pln"> </span><span class="pun">(</span><span class="pln">$another</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@an_array</span><span class="pun">,</span><span class="pln"> </span><span class="pun">%</span><span class="pln">a_hash</span><span class="pun">);</span><span class="pln"> </span><span class="com">#  同时声明多个变量</span><span class="pln">
</span><span class="pun">}</span></pre>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 全局变量</span><span class="hl-code">
</span><span class="hl-var">$string</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">Hello, World!</span><span class="hl-quotes">"</span><span class="hl-code">;
 
</span><span class="hl-comment"># 函数定义</span><span class="hl-code">
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">PrintHello</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-comment"># PrintHello 函数的私有变量</span><span class="hl-code">
   </span><span class="hl-reserved">my</span><span class="hl-code"> </span><span class="hl-var">$string</span><span class="hl-code">;
   </span><span class="hl-var">$string</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">Hello, Runoob!</span><span class="hl-quotes">"</span><span class="hl-code">;
   </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">函数内字符串：</span><span class="hl-var">$string</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-comment"># 调用函数</span><span class="hl-code">
</span><span class="hl-identifier">PrintHello</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">函数外字符串：</span><span class="hl-var">$string</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
</div><p>以上程序执行输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-48-42.jpg"></p>
<hr>
<h2>变量的临时赋值</h2>
<p>我们可以使用 local 为全局变量提供临时的值，在退出作用域后将原来的值还回去。</p>

<p>local 定义的变量不存在于主程序中，但存在于该子程序和该子程序调用的子程序中。定义时可以给其赋值，如：</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 全局变量</span><span class="hl-code">
</span><span class="hl-var">$string</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">Hello, World!</span><span class="hl-quotes">"</span><span class="hl-code">;
 
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">PrintRunoob</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-comment"># PrintHello 函数私有变量</span><span class="hl-code">
   </span><span class="hl-reserved">local</span><span class="hl-code"> </span><span class="hl-var">$string</span><span class="hl-code">;
   </span><span class="hl-var">$string</span><span class="hl-code"> = </span><span class="hl-quotes">"</span><span class="hl-string">Hello, Runoob!</span><span class="hl-quotes">"</span><span class="hl-code">;
   </span><span class="hl-comment"># 子程序调用的子程序</span><span class="hl-code">
   </span><span class="hl-identifier">PrintMe</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
   </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">PrintRunoob 函数内字符串值：</span><span class="hl-var">$string</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">PrintMe</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">PrintMe 函数内字符串值：</span><span class="hl-var">$string</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">PrintHello</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">PrintHello 函数内字符串值：</span><span class="hl-var">$string</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-comment"># 函数调用</span><span class="hl-code">
</span><span class="hl-identifier">PrintRunoob</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-identifier">PrintHello</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">函数外部字符串值：</span><span class="hl-var">$string</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
</div><p>以上程序执行输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-49-54.jpg"></p>
<hr>
<h2>静态变量</h2>
<p>state操作符功能类似于C里面的static修饰符，state关键字将局部变量变得持久。</p>
<p>state也是词法变量，所以只在定义该变量的词法作用域中有效，举个例子：</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-special">use feature</span><span class="hl-code"> </span><span class="hl-quotes">'</span><span class="hl-string">state</span><span class="hl-quotes">'</span><span class="hl-code">;
 
</span><span class="hl-reserved">sub</span><span class="hl-code"> </span><span class="hl-identifier">PrintCount</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-identifier">state</span><span class="hl-code"> </span><span class="hl-var">$count</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">; </span><span class="hl-comment"># 初始化变量</span><span class="hl-code">
 
   </span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-string">counter 值为：</span><span class="hl-var">$count</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
   </span><span class="hl-var">$count</span><span class="hl-code">++;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-reserved">for</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">.</span><span class="hl-number">.5</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-identifier">PrintCount</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>
</div>
</div><p>以上程序执行输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-52-31.jpg"></p>
<blockquote>
<p>注1：state仅能创建闭合作用域为子程序内部的变量。
</p><p>
注2：state是从Perl  5.9.4开始引入的，所以使用前必须加上 use。
</p><p>
注3：state可以声明标量、数组、哈希。但在声明数组和哈希时，不能对其初始化（至少Perl 5.14不支持）。

</p></blockquote>
<hr>
<h2>
子程序调用上下文</h2>
<p>子程序调用过程中，会根据上下文来返回不同类型的值，比如以下 localtime() 子程序，在标量上下文返回字符串，在列表上下文返回列表:</p>
<div class="example"> 
<h2 class="example">实例</h2> 
<div class="example_code">
<div class="hl-main"><span class="hl-special">#!/usr/bin/perl</span><span class="hl-code">
 
</span><span class="hl-comment"># 标量上下文</span><span class="hl-code">
</span><span class="hl-reserved">my</span><span class="hl-code"> </span><span class="hl-var">$datestring</span><span class="hl-code"> = </span><span class="hl-reserved">localtime</span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-reserved">time</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-var">$datestring</span><span class="hl-code">;
 
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;
 
</span><span class="hl-comment"># 列表上下文</span><span class="hl-code">
</span><span class="hl-brackets">(</span><span class="hl-var">$sec</span><span class="hl-code">,</span><span class="hl-var">$min</span><span class="hl-code">,</span><span class="hl-var">$hour</span><span class="hl-code">,</span><span class="hl-var">$mday</span><span class="hl-code">,</span><span class="hl-var">$mon</span><span class="hl-code">, </span><span class="hl-var">$year</span><span class="hl-code">,</span><span class="hl-var">$wday</span><span class="hl-code">,</span><span class="hl-var">$yday</span><span class="hl-code">,</span><span class="hl-var">$isdst</span><span class="hl-brackets">)</span><span class="hl-code"> = </span><span class="hl-reserved">localtime</span><span class="hl-brackets">(</span><span class="hl-reserved">time</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">%d-%d-%d %d:%d:%d</span><span class="hl-quotes">"</span><span class="hl-code">,</span><span class="hl-var">$year</span><span class="hl-code">+</span><span class="hl-number">1990</span><span class="hl-code">,</span><span class="hl-var">$mon</span><span class="hl-code">+</span><span class="hl-number">1</span><span class="hl-code">,</span><span class="hl-var">$mday</span><span class="hl-code">,</span><span class="hl-var">$hour</span><span class="hl-code">,</span><span class="hl-var">$min</span><span class="hl-code">,</span><span class="hl-var">$sec</span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-reserved">print</span><span class="hl-code"> </span><span class="hl-quotes">"</span><span class="hl-special">\n</span><span class="hl-quotes">"</span><span class="hl-code">;</span></div>
</div>
</div><p>以上程序执行输出结果为：</p>
<p><img width="50%" src="./files/Xnip2020-10-22_15-53-52.jpg"></p>
			<!-- 其他扩展 -->

							</div>
						</div>
						<div class="previous-next-links">
		<div class="previous-design-link">
		<a href="./运算符.html?pg=运算符" rel="prev" title="运算符">
			Perl 运算符		</a>
	</div>
	<div class="next-design-link">
		<a href="./引用.html?pg=引用" rel="next" title="引用">
			Perl 引用		</a>
	</div>
</div>
					</div>
				</div>
			</div>
		</div>
	
</body></html>
